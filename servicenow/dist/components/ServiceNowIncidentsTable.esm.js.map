{"version":3,"file":"ServiceNowIncidentsTable.esm.js","sources":["../../src/components/ServiceNowIncidentsTable.tsx"],"sourcesContent":["import {\n  InfoCard,\n  Table,\n  TableColumn,\n  Progress,\n  StatusOK,\n  StatusError,\n  StatusWarning,\n  StatusAborted,\n} from '@backstage/core-components';\nimport { Alert } from '@material-ui/lab';\n\nconst SERVICENOW_INSTANCE_URL = 'https://ven03172.service-now.com';\n\n// This definition is now exported to be shared\nexport type Incident = {\n  sys_id: string;\n  number: string;\n  short_description: string;\n  state: string;\n  priority: string;\n  opened_at: string;\n};\n\n// Helper component to show priority visually\nconst PriorityStatus = ({ priority }: { priority: string }) => {\n  switch (priority) {\n    case '1':\n      return <StatusError>1 - Critical</StatusError>;\n    case '2':\n      return <StatusWarning>2 - High</StatusWarning>;\n    case '3':\n      return <StatusOK>3 - Moderate</StatusOK>;\n    default:\n      return <StatusAborted>{priority} - Low</StatusAborted>;\n  }\n};\n\nconst columns: TableColumn<Incident>[] = [\n  {\n    title: 'Number',\n    field: 'number',\n    width: '10%',\n    render: rowData => (\n      <a\n        href={`${SERVICENOW_INSTANCE_URL}/nav_to.do?uri=incident.do?sys_id=${rowData.sys_id}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {rowData.number}\n      </a>\n    ),\n  },\n  { title: 'Description', field: 'short_description' },\n  { title: 'State', field: 'state', width: '10%' },\n  {\n    title: 'Priority',\n    field: 'priority',\n    width: '15%',\n    render: rowData => <PriorityStatus priority={rowData.priority} />,\n  },\n  { title: 'Opened At', field: 'opened_at', type: 'datetime' },\n];\n\ntype ServiceNowIncidentsTableProps = {\n  title: string;\n  incidents: Incident[];\n  loading: boolean;\n  error?: Error;\n  // Pagination props\n  page: number;\n  onPageChange: (page: number) => void;\n  pageSize: number;\n  onRowsPerPageChange: (pageSize: number) => void;\n  totalCount: number;\n};\n\nexport const ServiceNowIncidentsTable = (props: ServiceNowIncidentsTableProps) => {\n  const {\n    title,\n    incidents,\n    loading,\n    error,\n    page,\n    onPageChange,\n    pageSize,\n    onRowsPerPageChange,\n    totalCount,\n  } = props;\n\n  return (\n    <InfoCard>\n      {loading && <Progress />}\n      {error && <Alert severity=\"error\">{error.message}</Alert>}\n      {!loading && !error && (\n        <Table\n          title={title}\n          options={{ search: false, paging: true, pageSize }}\n          columns={columns}\n          data={incidents}\n          page={page}\n          totalCount={totalCount}\n          onPageChange={onPageChange}\n          onRowsPerPageChange={onRowsPerPageChange}\n        />\n      )}\n    </InfoCard>\n  );\n};\n"],"names":[],"mappings":";;;;AAYA,MAAM,uBAAA,GAA0B,kCAAA;AAahC,MAAM,cAAA,GAAiB,CAAC,EAAE,QAAA,EAAS,KAA4B;AAC7D,EAAA,QAAQ,QAAA;AAAU,IAChB,KAAK,GAAA;AACH,MAAA,uBAAO,GAAA,CAAC,eAAY,QAAA,EAAA,cAAA,EAAY,CAAA;AAAA,IAClC,KAAK,GAAA;AACH,MAAA,uBAAO,GAAA,CAAC,iBAAc,QAAA,EAAA,UAAA,EAAQ,CAAA;AAAA,IAChC,KAAK,GAAA;AACH,MAAA,uBAAO,GAAA,CAAC,YAAS,QAAA,EAAA,cAAA,EAAY,CAAA;AAAA,IAC/B;AACE,MAAA,4BAAQ,aAAA,EAAA,EAAe,QAAA,EAAA;AAAA,QAAA,QAAA;AAAA,QAAS;AAAA,OAAA,EAAM,CAAA;AAAA;AAE5C,CAAA;AAEA,MAAM,OAAA,GAAmC;AAAA,EACvC;AAAA,IACE,KAAA,EAAO,QAAA;AAAA,IACP,KAAA,EAAO,QAAA;AAAA,IACP,KAAA,EAAO,KAAA;AAAA,IACP,QAAQ,CAAA,OAAA,qBACN,GAAA;AAAA,MAAC,GAAA;AAAA,MAAA;AAAA,QACC,IAAA,EAAM,CAAA,EAAG,uBAAuB,CAAA,kCAAA,EAAqC,QAAQ,MAAM,CAAA,CAAA;AAAA,QACnF,MAAA,EAAO,QAAA;AAAA,QACP,GAAA,EAAI,qBAAA;AAAA,QAEH,QAAA,EAAA,OAAA,CAAQ;AAAA;AAAA;AACX,GAEJ;AAAA,EACA,EAAE,KAAA,EAAO,aAAA,EAAe,KAAA,EAAO,mBAAA,EAAoB;AAAA,EACnD,EAAE,KAAA,EAAO,OAAA,EAAS,KAAA,EAAO,OAAA,EAAS,OAAO,KAAA,EAAM;AAAA,EAC/C;AAAA,IACE,KAAA,EAAO,UAAA;AAAA,IACP,KAAA,EAAO,UAAA;AAAA,IACP,KAAA,EAAO,KAAA;AAAA,IACP,QAAQ,CAAA,OAAA,qBAAW,GAAA,CAAC,cAAA,EAAA,EAAe,QAAA,EAAU,QAAQ,QAAA,EAAU;AAAA,GACjE;AAAA,EACA,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,WAAA,EAAa,MAAM,UAAA;AAClD,CAAA;AAeO,MAAM,wBAAA,GAA2B,CAAC,KAAA,KAAyC;AAChF,EAAA,MAAM;AAAA,IACJ,KAAA;AAAA,IACA,SAAA;AAAA,IACA,OAAA;AAAA,IACA,KAAA;AAAA,IACA,IAAA;AAAA,IACA,YAAA;AAAA,IACA,QAAA;AAAA,IACA,mBAAA;AAAA,IACA;AAAA,GACF,GAAI,KAAA;AAEJ,EAAA,4BACG,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,IAAA,OAAA,wBAAY,QAAA,EAAA,EAAS,CAAA;AAAA,IACrB,yBAAS,GAAA,CAAC,KAAA,EAAA,EAAM,QAAA,EAAS,OAAA,EAAS,gBAAM,OAAA,EAAQ,CAAA;AAAA,IAChD,CAAC,OAAA,IAAW,CAAC,KAAA,oBACZ,GAAA;AAAA,MAAC,KAAA;AAAA,MAAA;AAAA,QACC,KAAA;AAAA,QACA,SAAS,EAAE,MAAA,EAAQ,KAAA,EAAO,MAAA,EAAQ,MAAM,QAAA,EAAS;AAAA,QACjD,OAAA;AAAA,QACA,IAAA,EAAM,SAAA;AAAA,QACN,IAAA;AAAA,QACA,UAAA;AAAA,QACA,YAAA;AAAA,QACA;AAAA;AAAA;AACF,GAAA,EAEJ,CAAA;AAEJ;;;;"}